/**
 * delta-controls v2.0.2 build Sat Jun 30 2018
 * https://github.com/vanruesc/delta-controls
 * Copyright 2018 Raoul van RÃ¼schen, Zlib
 */
(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?t(exports):'function'==typeof define&&define.amd?define(['exports'],t):t(e.DELTACONTROLS={})})(this,function(e){'use strict';function t(e,t,a){return g(k(e,a),t)}var n=Math.PI,o=Math.atan2,l=Math.round,r=Math.ceil,i=Math.floor,u=Math.abs,d=Math.acos,k=Math.min,g=Math.max,h=Math.sqrt,p=Math.cos,S=Math.sin,s={MOVE_FORWARD:0,MOVE_LEFT:1,MOVE_BACKWARD:2,MOVE_RIGHT:3,MOVE_DOWN:4,MOVE_UP:5,ZOOM_OUT:6,ZOOM_IN:7},A=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},P=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),w=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},E=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e},T=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},M=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;A(this,e),this.x=t,this.y=a,this.z=n}return P(e,[{key:'set',value:function(e,t,a){return this.x=e,this.y=t,this.z=a,this}},{key:'copy',value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:'setFromSpherical',value:function(e){var t=S(e.phi)*e.radius;return this.x=t*S(e.theta),this.y=p(e.phi)*e.radius,this.z=t*p(e.theta),this}},{key:'setFromCylindrical',value:function(e){return this.x=e.radius*S(e.theta),this.y=e.y,this.z=e.radius*p(e.theta),this}},{key:'setFromMatrixColumn',value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:'setFromMatrixPosition',value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:'setFromMatrixScale',value:function(e){var t=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=a,this.z=n,this}},{key:'add',value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:'addScalar',value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:'addVectors',value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:'addScaledVector',value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:'sub',value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:'subScalar',value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:'subVectors',value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:'multiply',value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:'multiplyScalar',value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:'multiplyVectors',value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:'divide',value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:'divideScalar',value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:'crossVectors',value:function(e,t){var a=e.x,n=e.y,o=e.z,l=t.x,r=t.y,y=t.z;return this.x=n*y-o*r,this.y=o*l-a*y,this.z=a*r-n*l,this}},{key:'cross',value:function(e){return this.crossVectors(this,e)}},{key:'transformDirection',value:function(t){var a=this.x,n=this.y,o=this.z,l=t.elements;return this.x=l[0]*a+l[4]*n+l[8]*o,this.y=l[1]*a+l[5]*n+l[9]*o,this.z=l[2]*a+l[6]*n+l[10]*o,this.normalize()}},{key:'applyMatrix3',value:function(t){var a=this.x,n=this.y,o=this.z,l=t.elements;return this.x=l[0]*a+l[3]*n+l[6]*o,this.y=l[1]*a+l[4]*n+l[7]*o,this.z=l[2]*a+l[5]*n+l[8]*o,this}},{key:'applyMatrix4',value:function(t){var a=this.x,n=this.y,o=this.z,l=t.elements;return this.x=l[0]*a+l[4]*n+l[8]*o+l[12],this.y=l[1]*a+l[5]*n+l[9]*o+l[13],this.z=l[2]*a+l[6]*n+l[10]*o+l[14],this}},{key:'applyQuaternion',value:function(e){var t=this.x,a=this.y,n=this.z,o=e.x,l=e.y,r=e.z,y=e.w,i=y*t+l*n-r*a,s=y*a+r*t-o*n,u=y*n+o*a-l*t,c=-o*t-l*a-r*n;return this.x=i*y+c*-o+s*-r-u*-l,this.y=s*y+c*-l+u*-o-i*-r,this.z=u*y+c*-r+i*-l-s*-o,this}},{key:'negate',value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:'dot',value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:'reflect',value:function(e){var t=e.x,a=e.y,n=e.z;return this.sub(e.multiplyScalar(2*this.dot(e))),e.set(t,a,n),this}},{key:'angleTo',value:function(e){var t=this.dot(e)/h(this.lengthSquared()*e.lengthSquared());return d(k(g(t,-1),1))}},{key:'manhattanLength',value:function(){return u(this.x)+u(this.y)+u(this.z)}},{key:'lengthSquared',value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:'length',value:function(){return h(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:'manhattanDistanceTo',value:function(e){return u(this.x-e.x)+u(this.y-e.y)+u(this.z-e.z)}},{key:'distanceToSquared',value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z;return t*t+a*a+n*n}},{key:'distanceTo',value:function(e){return h(this.distanceToSquared(e))}},{key:'normalize',value:function(){return this.divideScalar(this.length())}},{key:'setLength',value:function(e){return this.normalize().multiplyScalar(e)}},{key:'min',value:function(e){return this.x=k(this.x,e.x),this.y=k(this.y,e.y),this.z=k(this.z,e.z),this}},{key:'max',value:function(e){return this.x=g(this.x,e.x),this.y=g(this.y,e.y),this.z=g(this.z,e.z),this}},{key:'clamp',value:function(e,t){return this.x=g(e.x,k(t.x,this.x)),this.y=g(e.y,k(t.y,this.y)),this.z=g(e.z,k(t.z,this.z)),this}},{key:'floor',value:function(){return this.x=i(this.x),this.y=i(this.y),this.z=i(this.z),this}},{key:'ceil',value:function(){return this.x=r(this.x),this.y=r(this.y),this.z=r(this.z),this}},{key:'round',value:function(){return this.x=l(this.x),this.y=l(this.y),this.z=l(this.z),this}},{key:'lerp',value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:'lerpVectors',value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:'equals',value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}}]),e}(),f=new M,v=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M(1/0,1/0,1/0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M(-Infinity,-Infinity,-Infinity);A(this,e),this.min=t,this.max=a}return P(e,[{key:'set',value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:'copy',value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'makeEmpty',value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-Infinity,this}},{key:'isEmpty',value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:'getCenter',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:'getSize',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:'setFromSphere',value:function(e){return this.set(e.center,e.center),this.expandByScalar(e.radius),this}},{key:'expandByPoint',value:function(e){return this.min.min(e),this.max.max(e),this}},{key:'expandByVector',value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:'expandByScalar',value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:'setFromPoints',value:function(e){var t,a;for(this.min.set(0,0,0),this.max.set(0,0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:'setFromCenterAndSize',value:function(e,t){var a=f.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:'clampPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M;return t.copy(e).clamp(this.min,this.max)}},{key:'distanceToPoint',value:function(e){var t=f.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:'applyMatrix4',value:function(e){var t=this.min,a=this.max;if(!this.isEmpty()){var n=e.elements,o=n[0]*t.x,l=n[1]*t.x,r=n[2]*t.x,y=n[0]*a.x,i=n[1]*a.x,s=n[2]*a.x,u=n[4]*t.y,c=n[5]*t.y,m=n[6]*t.y,d=n[4]*a.y,v=n[5]*a.y,x=n[6]*a.y,p=n[8]*t.z,z=n[9]*t.z,h=n[10]*t.z,S=n[8]*a.z,A=n[9]*a.z,P=n[10]*a.z;t.x=k(o,y)+k(u,d)+k(p,S)+n[12],t.y=k(l,i)+k(c,v)+k(z,A)+n[13],t.z=k(r,s)+k(m,x)+k(h,P)+n[14],a.x=g(o,y)+g(u,d)+g(p,S)+n[12],a.y=g(l,i)+g(c,v)+g(z,A)+n[13],a.z=g(r,s)+g(m,x)+g(h,P)+n[14]}return this}},{key:'translate',value:function(e){return this.min.add(e),this.max.add(e),this}},{key:'intersect',value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:'union',value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:'containsPoint',value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.z>=t.z&&e.x<=a.x&&e.y<=a.y&&e.z<=a.z}},{key:'containsBox',value:function(e){var t=this.min,a=this.max,n=e.min,o=e.max;return t.x<=n.x&&o.x<=a.x&&t.y<=n.y&&o.y<=a.y&&t.z<=n.z&&o.z<=a.z}},{key:'intersectsBox',value:function(e){var t=this.min,a=this.max,n=e.min,o=e.max;return o.x>=t.x&&o.y>=t.y&&o.z>=t.z&&n.x<=a.x&&n.y<=a.y&&n.z<=a.z}},{key:'intersectsSphere',value:function(e){var t=this.clampPoint(e.center,f);return t.distanceToSquared(e.center)<=e.radius*e.radius}},{key:'intersectsPlane',value:function(e){var t,a;return 0<e.normal.x?(t=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,a=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),t<=e.constant&&a>=e.constant}},{key:'equals',value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),O=new v,F=new M,V=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;A(this,e),this.center=t,this.radius=a}return P(e,[{key:'set',value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:'copy',value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'setFromPoints',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O.setFromPoints(e).getCenter(this.center),a=0,n=void 0,o=void 0;for(n=0,o=e.length;n<o;++n)a=g(a,t.distanceToSquared(e[n]));return this.radius=h(a),this}},{key:'setFromBox',value:function(e){return e.getCenter(this.center),this.radius=.5*e.getSize(F).length(),this}},{key:'isEmpty',value:function(){return 0>=this.radius}},{key:'translate',value:function(e){return this.center.add(e),this}},{key:'clampPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M,a=this.center.distanceToSquared(e);return t.copy(e),a>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:'distanceToPoint',value:function(e){return e.distanceTo(this.center)-this.radius}},{key:'containsPoint',value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:'intersectsSphere',value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:'intersectsBox',value:function(e){return e.intersectsSphere(this)}},{key:'intersectsPlane',value:function(e){return u(e.distanceToPoint(this.center))<=this.radius}},{key:'equals',value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),e}(),L=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;A(this,e),this.x=t,this.y=a}return P(e,[{key:'set',value:function(e,t){return this.x=e,this.y=t,this}},{key:'copy',value:function(e){return this.x=e.x,this.y=e.y,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:'add',value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:'addScalar',value:function(e){return this.x+=e,this.y+=e,this}},{key:'addVectors',value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:'addScaledVector',value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:'sub',value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:'subScalar',value:function(e){return this.x-=e,this.y-=e,this}},{key:'subVectors',value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:'multiply',value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:'multiplyScalar',value:function(e){return this.x*=e,this.y*=e,this}},{key:'divide',value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:'divideScalar',value:function(e){return this.x/=e,this.y/=e,this}},{key:'applyMatrix3',value:function(t){var a=this.x,n=this.y,o=t.elements;return this.x=o[0]*a+o[3]*n+o[6],this.y=o[1]*a+o[4]*n+o[7],this}},{key:'dot',value:function(e){return this.x*e.x+this.y*e.y}},{key:'manhattanLength',value:function(){return u(this.x)+u(this.y)}},{key:'lengthSquared',value:function(){return this.x*this.x+this.y*this.y}},{key:'length',value:function(){return h(this.x*this.x+this.y*this.y)}},{key:'manhattanDistanceTo',value:function(e){return u(this.x-e.x)+u(this.y-e.y)}},{key:'distanceToSquared',value:function(e){var t=this.x-e.x,a=this.y-e.y;return t*t+a*a}},{key:'distanceTo',value:function(e){return h(this.distanceToSquared(e))}},{key:'normalize',value:function(){return this.divideScalar(this.length())}},{key:'setLength',value:function(e){return this.normalize().multiplyScalar(e)}},{key:'min',value:function(e){return this.x=k(this.x,e.x),this.y=k(this.y,e.y),this}},{key:'max',value:function(e){return this.x=g(this.x,e.x),this.y=g(this.y,e.y),this}},{key:'clamp',value:function(e,t){return this.x=g(e.x,k(t.x,this.x)),this.y=g(e.y,k(t.y,this.y)),this}},{key:'floor',value:function(){return this.x=i(this.x),this.y=i(this.y),this}},{key:'ceil',value:function(){return this.x=r(this.x),this.y=r(this.y),this}},{key:'round',value:function(){return this.x=l(this.x),this.y=l(this.y),this}},{key:'negate',value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:'angle',value:function(){var e=o(this.y,this.x);return 0>e&&(e+=2*n),e}},{key:'lerp',value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:'lerpVectors',value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:'rotateAround',value:function(e,t){var a=p(t),n=S(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*a-l*n+e.x,this.y=o*n+l*a+e.y,this}},{key:'equals',value:function(e){return e.x===this.x&&e.y===this.y}},{key:'width',get:function(){return this.x},set:function(e){return this.x=e}},{key:'height',get:function(){return this.y},set:function(e){return this.y=e}}]),e}(),D=new L,C=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L(1/0,1/0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L(-Infinity,-Infinity);A(this,e),this.min=t,this.max=a}return P(e,[{key:'set',value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:'copy',value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'makeEmpty',value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-Infinity,this}},{key:'isEmpty',value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:'getCenter',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:'getSize',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:'getBoundingSphere',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new V;return this.getCenter(e.center),e.radius=.5*this.getSize(D).length(),e}},{key:'expandByPoint',value:function(e){return this.min.min(e),this.max.max(e),this}},{key:'expandByVector',value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:'expandByScalar',value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:'setFromPoints',value:function(e){var t,a;for(this.min.set(0,0),this.max.set(0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:'setFromCenterAndSize',value:function(e,t){var a=D.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:'clampPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L;return t.copy(e).clamp(this.min,this.max)}},{key:'distanceToPoint',value:function(e){var t=D.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:'translate',value:function(e){return this.min.add(e),this.max.add(e),this}},{key:'intersect',value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:'union',value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:'containsPoint',value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.x<=a.x&&e.y<=a.y}},{key:'containsBox',value:function(e){var t=this.min,a=this.max,n=e.min,o=e.max;return t.x<=n.x&&o.x<=a.x&&t.y<=n.y&&o.y<=a.y}},{key:'intersectsBox',value:function(e){var t=this.min,a=this.max,n=e.min,o=e.max;return o.x>=t.x&&o.y>=t.y&&n.x<=a.x&&n.y<=a.y}},{key:'equals',value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),_=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;A(this,e),this.radius=t,this.theta=a,this.y=n}return P(e,[{key:'set',value:function(e,t,a){return this.radius=e,this.theta=t,this.y=a,this}},{key:'copy',value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'setFromVector3',value:function(e){return this.radius=h(e.x*e.x+e.z*e.z),this.theta=o(e.x,e.z),this.y=e.y,this}}]),e}(),R=function(){function e(){A(this,e),this.elements=new Float32Array([1,0,0,0,1,0,0,0,1])}return P(e,[{key:'set',value:function(e,t,a,n,o,l,r,y,i){var s=this.elements;return s[0]=e,s[3]=t,s[6]=a,s[1]=n,s[4]=o,s[7]=l,s[2]=r,s[5]=y,s[8]=i,this}},{key:'identity',value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:'copy',value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],this}},{key:'clone',value:function(){return new this.constructor().fromArray(this.elements)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n=void 0;for(n=0;9>n;++n)a[n]=e[n+t];return this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n=void 0;for(n=0;9>n;++n)e[n+t]=a[n];return e}},{key:'multiplyMatrices',value:function(e,t){var a=e.elements,n=t.elements,o=this.elements,l=a[0],r=a[3],y=a[6],i=a[1],s=a[4],u=a[7],c=a[2],m=a[5],d=a[8],v=n[0],x=n[3],k=n[6],p=n[1],g=n[4],z=n[7],h=n[2],S=n[5],A=n[8];return o[0]=l*v+r*p+y*h,o[3]=l*x+r*g+y*S,o[6]=l*k+r*z+y*A,o[1]=i*v+s*p+u*h,o[4]=i*x+s*g+u*S,o[7]=i*k+s*z+u*A,o[2]=c*v+m*p+d*h,o[5]=c*x+m*g+d*S,o[8]=c*k+m*z+d*A,this}},{key:'multiply',value:function(e){return this.multiplyMatrices(this,e)}},{key:'premultiply',value:function(e){return this.multiplyMatrices(e,this)}},{key:'multiplyScalar',value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:'determinant',value:function(){var t=this.elements,n=t[0],a=t[1],o=t[2],l=t[3],r=t[4],e=t[5],y=t[6],s=t[7],u=t[8];return n*r*u-n*e*s-a*l*u+a*e*y+o*l*s-o*r*y}},{key:'getInverse',value:function(e){var t=e.elements,a=this.elements,n=t[0],o=t[1],l=t[2],r=t[3],y=t[4],i=t[5],s=t[6],u=t[7],c=t[8],m=c*y-i*u,d=i*s-c*r,v=u*r-y*s,x=n*m+o*d+l*v,k=void 0;return 0==x?(console.error('Can\'t invert matrix, determinant is zero',e),this.identity()):(k=1/x,a[0]=m*k,a[1]=(l*u-c*o)*k,a[2]=(i*o-l*y)*k,a[3]=d*k,a[4]=(c*n-l*s)*k,a[5]=(l*r-i*n)*k,a[6]=v*k,a[7]=(o*s-u*n)*k,a[8]=(y*n-o*r)*k),this}},{key:'transpose',value:function(){var e=this.elements,a=void 0;return a=e[1],e[1]=e[3],e[3]=a,a=e[2],e[2]=e[6],e[6]=a,a=e[5],e[5]=e[7],e[7]=a,this}},{key:'scale',value:function(e,t){var a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=t,a[4]*=t,a[7]*=t,this}},{key:'rotate',value:function(e){var t=p(e),a=S(e),n=this.elements,o=n[0],l=n[3],r=n[6],y=n[1],i=n[4],s=n[7];return n[0]=t*o+a*y,n[3]=t*l+a*i,n[6]=t*r+a*s,n[1]=-a*o+t*y,n[4]=-a*l+t*i,n[7]=-a*r+t*s,this}},{key:'translate',value:function(e,t){var a=this.elements;return a[0]+=e*a[2],a[3]+=e*a[5],a[6]+=e*a[8],a[1]+=t*a[2],a[4]+=t*a[5],a[7]+=t*a[8],this}},{key:'equals',value:function(e){var t=this.elements,a=e.elements,n=!0,o=void 0;for(o=0;n&&9>o;++o)t[o]!==a[o]&&(n=!1);return n}}]),e}(),B={XYZ:'XYZ',YZX:'YZX',ZXY:'ZXY',XZY:'XZY',YXZ:'YXZ',ZYX:'ZYX'},Y=new M,X=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;A(this,e),this.x=t,this.y=a,this.z=n,this.w=o}var a=Number.EPSILON;return P(e,[{key:'set',value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:'copy',value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:'setFromEuler',value:function(e){var t=e.x,a=e.y,n=e.z,o=p,l=S,r=o(t/2),y=o(a/2),i=o(n/2),s=l(t/2),u=l(a/2),c=l(n/2);switch(e.order){case B.XYZ:this.x=s*y*i+r*u*c,this.y=r*u*i-s*y*c,this.z=r*y*c+s*u*i,this.w=r*y*i-s*u*c;break;case B.YXZ:this.x=s*y*i+r*u*c,this.y=r*u*i-s*y*c,this.z=r*y*c-s*u*i,this.w=r*y*i+s*u*c;break;case B.ZXY:this.x=s*y*i-r*u*c,this.y=r*u*i+s*y*c,this.z=r*y*c+s*u*i,this.w=r*y*i-s*u*c;break;case B.ZYX:this.x=s*y*i-r*u*c,this.y=r*u*i+s*y*c,this.z=r*y*c-s*u*i,this.w=r*y*i+s*u*c;break;case B.YZX:this.x=s*y*i+r*u*c,this.y=r*u*i+s*y*c,this.z=r*y*c-s*u*i,this.w=r*y*i-s*u*c;break;case B.XZY:this.x=s*y*i-r*u*c,this.y=r*u*i-s*y*c,this.z=r*y*c+s*u*i,this.w=r*y*i+s*u*c;}return this}},{key:'setFromAxisAngle',value:function(e,t){var a=t/2,n=S(a);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=p(a),this}},{key:'setFromRotationMatrix',value:function(e){var t=e.elements,a=t[0],n=t[4],o=t[8],l=t[1],r=t[5],y=t[9],i=t[2],u=t[6],c=t[10],m=a+r+c,d=void 0;return 0<m?(d=.5/h(m+1),this.w=.25/d,this.x=(u-y)*d,this.y=(o-i)*d,this.z=(l-n)*d):a>r&&a>c?(d=2*h(1+a-r-c),this.w=(u-y)/d,this.x=.25*d,this.y=(n+l)/d,this.z=(o+i)/d):r>c?(d=2*h(1+r-a-c),this.w=(o-i)/d,this.x=(n+l)/d,this.y=.25*d,this.z=(y+u)/d):(d=2*h(1+c-a-r),this.w=(l-n)/d,this.x=(o+i)/d,this.y=(y+u)/d,this.z=.25*d),this}},{key:'setFromUnitVectors',value:function(e,t){var a=e.dot(t)+1;return 1e-6>a?(a=0,u(e.x)>u(e.z)?Y.set(-e.y,e.x,0):Y.set(0,-e.z,e.y)):Y.crossVectors(e,t),this.x=Y.x,this.y=Y.y,this.z=Y.z,this.w=a,this.normalize()}},{key:'invert',value:function(){return this.conjugate()}},{key:'conjugate',value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:'lengthSquared',value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:'length',value:function(){return h(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:'normalize',value:function(){var e=this.length(),t=void 0;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/e,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}},{key:'dot',value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:'multiplyQuaternions',value:function(e,t){var a=e.x,n=e.y,o=e.z,l=e.w,r=t.x,y=t.y,i=t.z,s=t.w;return this.x=a*s+l*r+n*i-o*y,this.y=n*s+l*y+o*r-a*i,this.z=o*s+l*i+a*y-n*r,this.w=l*s-a*r-n*y-o*i,this}},{key:'multiply',value:function(e){return this.multiplyQuaternions(this,e)}},{key:'premultiply',value:function(e){return this.multiplyQuaternions(e,this)}},{key:'slerp',value:function(e,n){var t=this.x,l=this.y,r=this.z,y=this.w,i=void 0,u=void 0,c=void 0,m=void 0,d=void 0,v=void 0,x=void 0;return 1===n?this.copy(e):0<n&&(i=y*e.w+t*e.x+l*e.y+r*e.z,0>i?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,i=-i):this.copy(e),1<=i?(this.w=y,this.x=t,this.y=l,this.z=r):(u=1-i*i,d=1-n,u<=a?(this.w=d*y+n*this.w,this.x=d*t+n*this.x,this.y=d*l+n*this.y,this.z=d*r+n*this.z,this.normalize()):(c=h(u),m=o(c,i),v=S(d*m)/c,x=S(n*m)/c,this.w=y*v+this.w*x,this.x=t*v+this.x*x,this.y=l*v+this.y*x,this.z=r*v+this.z*x))),this}},{key:'equals',value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}],[{key:'slerp',value:function(e,a,n,o){return n.copy(e).slerp(a,o)}},{key:'slerpFlat',value:function(e,n,l,r,y,i,u){var c=y[i],m=y[i+1],d=y[i+2],v=y[i+3],x=l[r],k=l[r+1],p=l[r+2],g=l[r+3],z=void 0,A=void 0,P=void 0,w=void 0,E=void 0,T=void 0,M=void 0,b=void 0;(g!==v||x!==c||k!==m||p!==d)&&(z=1-u,w=x*c+k*m+p*d+g*v,T=0<=w?1:-1,E=1-w*w,E>a&&(P=h(E),M=o(P,w*T),z=S(z*M)/P,u=S(u*M)/P),b=u*T,x=x*z+c*b,k=k*z+m*b,p=p*z+d*b,g=g*z+v*b,z===1-u&&(A=1/h(x*x+k*k+p*p+g*g),x*=A,k*=A,p*=A,g*=A)),e[n]=x,e[n+1]=k,e[n+2]=p,e[n+3]=g}}]),e}(),N=new R,m=new X,q=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;A(this,e),this.x=t,this.y=a,this.z=n,this.order=e.defaultOrder}return P(e,[{key:'set',value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.order=n,this}},{key:'copy',value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.order=t.order,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y,this.z,this.order)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.order=e[t+3],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.order,e}},{key:'toVector3',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M;return e.set(this.x,this.y,this.z)}},{key:'setFromRotationMatrix',value:function(e){var a=Math.asin,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order,l=e.elements,r=l[0],y=l[4],i=l[8],s=l[1],c=l[5],m=l[9],d=l[2],v=l[6],x=l[10],k=1-1e-5;switch(n){case B.XYZ:{this.y=a(t(i,-1,1)),u(i)<k?(this.x=o(-m,x),this.z=o(-y,r)):(this.x=o(v,c),this.z=0);break}case B.YXZ:{this.x=a(-t(m,-1,1)),u(m)<k?(this.y=o(i,x),this.z=o(s,c)):(this.y=o(-d,r),this.z=0);break}case B.ZXY:{this.x=a(t(v,-1,1)),u(v)<k?(this.y=o(-d,x),this.z=o(-y,c)):(this.y=0,this.z=o(s,r));break}case B.ZYX:{this.y=a(-t(d,-1,1)),u(d)<k?(this.x=o(v,x),this.z=o(s,r)):(this.x=0,this.z=o(-y,c));break}case B.YZX:{this.z=a(t(s,-1,1)),u(s)<k?(this.x=o(-m,c),this.y=o(-d,r)):(this.x=0,this.y=o(i,x));break}case B.XZY:{this.z=a(-t(y,-1,1)),u(y)<k?(this.x=o(v,c),this.y=o(i,r)):(this.x=o(-m,x),this.y=0);break}}return this.order=n,this}},{key:'setFromQuaternion',value:function(e,t){return N.makeRotationFromQuaternion(e),this.setFromRotationMatrix(N,t)}},{key:'setFromVector3',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order;return this.set(e.x,e.y,e.z,t)}},{key:'reorder',value:function(e){return m.setFromEuler(this),this.setFromQuaternion(m,e)}},{key:'equals',value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.order===this.order}}],[{key:'defaultOrder',get:function(){return B.XYZ}}]),e}(),Z=new M,a=new M,b=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M(1,0,0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;A(this,e),this.normal=t,this.constant=a}return P(e,[{key:'set',value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:'setComponents',value:function(e,t,a,n){return this.normal.set(e,t,a),this.constant=n,this}},{key:'copy',value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'setFromNormalAndCoplanarPoint',value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:'setFromCoplanarPoints',value:function(e,t,n){var o=Z.subVectors(n,t).cross(a.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,Z),this}},{key:'normalize',value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:'negate',value:function(){return this.normal.negate(),this.constant=-this.constant,this}},{key:'distanceToPoint',value:function(e){return this.normal.dot(e)+this.constant}},{key:'distanceToSphere',value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:'projectPoint',value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:'coplanarPoint',value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:'translate',value:function(e){return this.constant-=e.dot(this.normal),this}},{key:'intersectLine',value:function(e,a){var n=e.delta(Z),o=this.normal.dot(n);if(0===o)0===this.distanceToPoint(e.start)&&a.copy(e.start);else{var l=-(e.start.dot(this.normal)+this.constant)/o;0<=l&&1>=l&&a.copy(n).multiplyScalar(l).add(e.start)}return a}},{key:'intersectsLine',value:function(e){var t=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return 0>t&&0<a||0>a&&0<t}},{key:'intersectsBox',value:function(e){return e.intersectsPlane(this)}},{key:'intersectsSphere',value:function(e){return e.intersectsPlane(this)}},{key:'equals',value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),e}(),I=new M,U=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new b,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new b,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new b,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new b,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:new b,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new b;A(this,e),this.planes=[t,a,n,o,l,r]}return P(e,[{key:'set',value:function(e,t,a,n,o,l){var r=this.planes;return r[0].copy(e),r[1].copy(t),r[2].copy(a),r[3].copy(n),r[4].copy(o),r[5].copy(l),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'copy',value:function(e){var t=this.planes,a=void 0;for(a=0;6>a;++a)t[a].copy(e.planes[a]);return this}},{key:'setFromMatrix',value:function(e){var t=this.planes,a=e.elements,n=a[0],o=a[1],l=a[2],r=a[3],y=a[4],i=a[5],s=a[6],u=a[7],c=a[8],m=a[9],d=a[10],v=a[11],x=a[12],k=a[13],p=a[14],g=a[15];return t[0].setComponents(r-n,u-y,v-c,g-x).normalize(),t[1].setComponents(r+n,u+y,v+c,g+x).normalize(),t[2].setComponents(r+o,u+i,v+m,g+k).normalize(),t[3].setComponents(r-o,u-i,v-m,g-k).normalize(),t[4].setComponents(r-l,u-s,v-d,g-p).normalize(),t[5].setComponents(r+l,u+s,v+d,g+p).normalize(),this}},{key:'intersectsSphere',value:function(e){var t=this.planes,a=e.center,n=-e.radius,o=!0,l=void 0,r=void 0;for(l=0;6>l;++l)if(r=t[l].distanceToPoint(a),r<n){o=!1;break}return o}},{key:'intersectsBox',value:function(e){var t=this.planes,a=e.min,n=e.max,o=void 0,l=void 0;for(o=0;6>o;++o)if(l=t[o],I.x=0<l.normal.x?n.x:a.x,I.y=0<l.normal.y?n.y:a.y,I.z=0<l.normal.z?n.z:a.z,0>l.distanceToPoint(I))return!1;return!0}},{key:'containsPoint',value:function(e){var t=this.planes,a=!0,n=void 0;for(n=0;6>n;++n)if(0>t[n].distanceToPoint(e)){a=!1;break}return a}}]),e}(),W=new M,Q=new M,K=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M;A(this,e),this.start=t,this.end=a}return P(e,[{key:'set',value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:'copy',value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'getCenter',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M;return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:'delta',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M;return e.subVectors(this.end,this.start)}},{key:'lengthSquared',value:function(){return this.start.distanceToSquared(this.end)}},{key:'length',value:function(){return this.start.distanceTo(this.end)}},{key:'at',value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:'closestPointToPointParameter',value:function(e,a){W.subVectors(e,this.start),Q.subVectors(this.end,this.start);var n=Q.dot(Q),o=Q.dot(W),l=a?k(g(o/n,0),1):o/n;return l}},{key:'closestPointToPoint',value:function(e){var a=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new M,o=this.closestPointToPointParameter(e,a);return this.delta(n).multiplyScalar(o).add(this.start)}},{key:'equals',value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}]),e}(),G=new M,H=new M,j=new M,c=function(){function e(){A(this,e),this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return P(e,[{key:'set',value:function(e,t,a,n,o,l,r,y,i,s,u,c,m,d,v,x){var k=this.elements;return k[0]=e,k[4]=t,k[8]=a,k[12]=n,k[1]=o,k[5]=l,k[9]=r,k[13]=y,k[2]=i,k[6]=s,k[10]=u,k[14]=c,k[3]=m,k[7]=d,k[11]=v,k[15]=x,this}},{key:'identity',value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:'copy',value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],this}},{key:'clone',value:function(){return new this.constructor().fromArray(this.elements)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n=void 0;for(n=0;16>n;++n)a[n]=e[n+t];return this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n=void 0;for(n=0;16>n;++n)e[n+t]=a[n];return e}},{key:'getMaxScaleOnAxis',value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return h(g(t,a,n))}},{key:'copyPosition',value:function(e){var t=this.elements,a=e.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this}},{key:'setPosition',value:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this}},{key:'extractBasis',value:function(e,t,a){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}},{key:'makeBasis',value:function(e,t,a){return this.set(e.x,t.x,a.x,0,e.y,t.y,a.y,0,e.z,t.z,a.z,0,0,0,0,1),this}},{key:'extractRotation',value:function(e){var t=this.elements,a=e.elements,n=1/G.setFromMatrixColumn(e,0).length(),o=1/G.setFromMatrixColumn(e,1).length(),l=1/G.setFromMatrixColumn(e,2).length();return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=0,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=0,t[8]=a[8]*l,t[9]=a[9]*l,t[10]=a[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:'makeRotationFromEuler',value:function(t){var n=this.elements,o=t.x,l=t.y,r=t.z,y=p(o),a=S(o),i=p(l),s=S(l),u=p(r),e=S(r),c=void 0,m=void 0,d=void 0,v=void 0,x=void 0,k=void 0,g=void 0,z=void 0,h=void 0,A=void 0,P=void 0,w=void 0;switch(t.order){case B.XYZ:{c=y*u,m=y*e,d=a*u,v=a*e,n[0]=i*u,n[4]=-i*e,n[8]=s,n[1]=m+d*s,n[5]=c-v*s,n[9]=-a*i,n[2]=v-c*s,n[6]=d+m*s,n[10]=y*i;break}case B.YXZ:{x=i*u,k=i*e,g=s*u,z=s*e,n[0]=x+z*a,n[4]=g*a-k,n[8]=y*s,n[1]=y*e,n[5]=y*u,n[9]=-a,n[2]=k*a-g,n[6]=z+x*a,n[10]=y*i;break}case B.ZXY:{x=i*u,k=i*e,g=s*u,z=s*e,n[0]=x-z*a,n[4]=-y*e,n[8]=g+k*a,n[1]=k+g*a,n[5]=y*u,n[9]=z-x*a,n[2]=-y*s,n[6]=a,n[10]=y*i;break}case B.ZYX:{c=y*u,m=y*e,d=a*u,v=a*e,n[0]=i*u,n[4]=d*s-m,n[8]=c*s+v,n[1]=i*e,n[5]=v*s+c,n[9]=m*s-d,n[2]=-s,n[6]=a*i,n[10]=y*i;break}case B.YZX:{h=y*i,A=y*s,P=a*i,w=a*s,n[0]=i*u,n[4]=w-h*e,n[8]=P*e+A,n[1]=e,n[5]=y*u,n[9]=-a*u,n[2]=-s*u,n[6]=A*e+P,n[10]=h-w*e;break}case B.XZY:{h=y*i,A=y*s,P=a*i,w=a*s,n[0]=i*u,n[4]=-e,n[8]=s*u,n[1]=h*e+w,n[5]=y*u,n[9]=A*e-P,n[2]=P*e-A,n[6]=a*u,n[10]=w*e+h;break}}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:'makeRotationFromQuaternion',value:function(e){return this.compose(G.set(0,0,0),e,H.set(1,1,1))}},{key:'lookAt',value:function(e,t,a){var n=this.elements,o=G,l=H,r=j;return r.subVectors(e,t),0===r.lengthSquared()&&(r.z=1),r.normalize(),o.crossVectors(a,r),0===o.lengthSquared()&&(1===u(a.z)?r.x+=1e-4:r.z+=1e-4,r.normalize(),o.crossVectors(a,r)),o.normalize(),l.crossVectors(r,o),n[0]=o.x,n[4]=l.x,n[8]=r.x,n[1]=o.y,n[5]=l.y,n[9]=r.y,n[2]=o.z,n[6]=l.z,n[10]=r.z,this}},{key:'multiplyMatrices',value:function(e,t){var a=this.elements,n=e.elements,o=t.elements,l=n[0],r=n[4],y=n[8],i=n[12],s=n[1],u=n[5],c=n[9],m=n[13],d=n[2],v=n[6],x=n[10],k=n[14],p=n[3],g=n[7],z=n[11],h=n[15],S=o[0],A=o[4],P=o[8],w=o[12],E=o[1],T=o[5],M=o[9],f=o[13],b=o[2],O=o[6],F=o[10],V=o[14],L=o[3],D=o[7],C=o[11],_=o[15];return a[0]=l*S+r*E+y*b+i*L,a[4]=l*A+r*T+y*O+i*D,a[8]=l*P+r*M+y*F+i*C,a[12]=l*w+r*f+y*V+i*_,a[1]=s*S+u*E+c*b+m*L,a[5]=s*A+u*T+c*O+m*D,a[9]=s*P+u*M+c*F+m*C,a[13]=s*w+u*f+c*V+m*_,a[2]=d*S+v*E+x*b+k*L,a[6]=d*A+v*T+x*O+k*D,a[10]=d*P+v*M+x*F+k*C,a[14]=d*w+v*f+x*V+k*_,a[3]=p*S+g*E+z*b+h*L,a[7]=p*A+g*T+z*O+h*D,a[11]=p*P+g*M+z*F+h*C,a[15]=p*w+g*f+z*V+h*_,this}},{key:'multiply',value:function(e){return this.multiplyMatrices(this,e)}},{key:'premultiply',value:function(e){return this.multiplyMatrices(e,this)}},{key:'multiplyScalar',value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:'determinant',value:function(){var e=this.elements,t=e[0],a=e[4],n=e[8],o=e[12],l=e[1],r=e[5],y=e[9],i=e[13],s=e[2],u=e[6],c=e[10],m=e[14],d=e[3],v=e[7],x=e[11],k=e[15],p=t*r,g=t*y,z=t*i,h=a*l,S=a*y,A=a*i,P=n*l,w=n*r,E=n*i,T=o*l,M=o*r,f=o*y;return d*(f*u-E*u-M*c+A*c+w*m-S*m)+v*(g*m-z*c+T*c-P*m+E*s-f*s)+x*(z*u-p*m-T*u+h*m+M*s-A*s)+k*(-w*s-g*u+p*c+P*u-h*c+S*s)}},{key:'getInverse',value:function(e){var t=this.elements,a=e.elements,n=a[0],o=a[1],l=a[2],r=a[3],y=a[4],i=a[5],s=a[6],u=a[7],c=a[8],m=a[9],d=a[10],v=a[11],x=a[12],k=a[13],p=a[14],g=a[15],z=m*p*u-k*d*u+k*s*v-i*p*v-m*s*g+i*d*g,h=x*d*u-c*p*u-x*s*v+y*p*v+c*s*g-y*d*g,S=c*k*u-x*m*u+x*i*v-y*k*v-c*i*g+y*m*g,A=x*m*s-c*k*s-x*i*d+y*k*d+c*i*p-y*m*p,P=n*z+o*h+l*S+r*A,w=void 0;return 0==P?(console.error('Can\'t invert matrix, determinant is zero',e),this.identity()):(w=1/P,t[0]=z*w,t[1]=(k*d*r-m*p*r-k*l*v+o*p*v+m*l*g-o*d*g)*w,t[2]=(i*p*r-k*s*r+k*l*u-o*p*u-i*l*g+o*s*g)*w,t[3]=(m*s*r-i*d*r-m*l*u+o*d*u+i*l*v-o*s*v)*w,t[4]=h*w,t[5]=(c*p*r-x*d*r+x*l*v-n*p*v-c*l*g+n*d*g)*w,t[6]=(x*s*r-y*p*r-x*l*u+n*p*u+y*l*g-n*s*g)*w,t[7]=(y*d*r-c*s*r+c*l*u-n*d*u-y*l*v+n*s*v)*w,t[8]=S*w,t[9]=(x*m*r-c*k*r-x*o*v+n*k*v+c*o*g-n*m*g)*w,t[10]=(y*k*r-x*i*r+x*o*u-n*k*u-y*o*g+n*i*g)*w,t[11]=(c*i*r-y*m*r-c*o*u+n*m*u+y*o*v-n*i*v)*w,t[12]=A*w,t[13]=(c*k*l-x*m*l+x*o*d-n*k*d-c*o*p+n*m*p)*w,t[14]=(x*i*l-y*k*l-x*o*s+n*k*s+y*o*p-n*i*p)*w,t[15]=(y*m*l-c*i*l+c*o*s-n*m*s-y*o*d+n*i*d)*w),this}},{key:'transpose',value:function(){var e=this.elements,a=void 0;return a=e[1],e[1]=e[4],e[4]=a,a=e[2],e[2]=e[8],e[8]=a,a=e[6],e[6]=e[9],e[9]=a,a=e[3],e[3]=e[12],e[12]=a,a=e[7],e[7]=e[13],e[13]=a,a=e[11],e[11]=e[14],e[14]=a,this}},{key:'scale',value:function(e,t,a){var n=this.elements;return n[0]*=e,n[4]*=t,n[8]*=a,n[1]*=e,n[5]*=t,n[9]*=a,n[2]*=e,n[6]*=t,n[10]*=a,n[3]*=e,n[7]*=t,n[11]*=a,this}},{key:'makeScale',value:function(e,t,a){return this.set(e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this}},{key:'makeTranslation',value:function(e,t,a){return this.set(1,0,0,e,0,1,0,t,0,0,1,a,0,0,0,1),this}},{key:'makeRotationX',value:function(e){var t=p(e),a=S(e);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this}},{key:'makeRotationY',value:function(e){var t=p(e),a=S(e);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this}},{key:'makeRotationZ',value:function(e){var t=p(e),a=S(e);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this}},{key:'makeRotationAxis',value:function(e,a){var n=p(a),o=S(a),l=1-n,t=e.x,r=e.y,y=e.z,i=l*t,s=l*r;return this.set(i*t+n,i*r-o*y,i*y+o*r,0,i*r+o*y,s*r+n,s*y-o*t,0,i*y-o*r,s*y+o*t,l*y*y+n,0,0,0,0,1),this}},{key:'makeShear',value:function(e,t,a){return this.set(1,t,a,0,e,1,a,0,e,t,1,0,0,0,0,1),this}},{key:'compose',value:function(e,t,a){var n=this.elements,o=t.x,l=t.y,r=t.z,y=t.w,i=o+o,s=l+l,u=r+r,c=o*i,m=o*s,d=o*u,v=l*s,x=l*u,k=r*u,p=y*i,g=y*s,z=y*u,h=a.x,S=a.y,A=a.z;return n[0]=(1-(v+k))*h,n[1]=(m+z)*h,n[2]=(d-g)*h,n[3]=0,n[4]=(m-z)*S,n[5]=(1-(c+k))*S,n[6]=(x+p)*S,n[7]=0,n[8]=(d+g)*A,n[9]=(x-p)*A,n[10]=(1-(c+v))*A,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}},{key:'decompose',value:function(e,t,a){var n=this.elements,o=n[0],l=n[1],r=n[2],y=n[4],i=n[5],s=n[6],u=n[8],c=n[9],m=n[10],d=this.determinant(),v=G.set(o,l,r).length()*(0>d?-1:1),x=G.set(y,i,s).length(),k=G.set(u,c,m).length(),p=1/v,g=1/x,z=1/k;return e.x=n[12],e.y=n[13],e.z=n[14],n[0]*=p,n[1]*=p,n[2]*=p,n[4]*=g,n[5]*=g,n[6]*=g,n[8]*=z,n[9]*=z,n[10]*=z,t.setFromRotationMatrix(this),n[0]=o,n[1]=l,n[2]=r,n[4]=y,n[5]=i,n[6]=s,n[8]=u,n[9]=c,n[10]=m,a.x=v,a.y=x,a.z=k,this}},{key:'makePerspective',value:function(e,t,a,n,o,l){var r=this.elements;return r[0]=2*o/(t-e),r[4]=0,r[8]=(t+e)/(t-e),r[12]=0,r[1]=0,r[5]=2*o/(a-n),r[9]=(a+n)/(a-n),r[13]=0,r[2]=0,r[6]=0,r[10]=-(l+o)/(l-o),r[14]=-2*l*o/(l-o),r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this}},{key:'makeOrthographic',value:function(e,t,a,n,o,l){var r=this.elements,y=1/(t-e),i=1/(a-n),s=1/(l-o);return r[0]=2*y,r[4]=0,r[8]=0,r[12]=-((t+e)*y),r[1]=0,r[5]=2*i,r[9]=0,r[13]=-((a+n)*i),r[2]=0,r[6]=0,r[10]=-2*s,r[14]=-((l+o)*s),r[3]=0,r[7]=0,r[11]=0,r[15]=1,this}},{key:'equals',value:function(e){var t=this.elements,a=e.elements,n=!0,o=void 0;for(o=0;n&&16>o;++o)t[o]!==a[o]&&(n=!1);return n}}]),e}(),J=[new M,new M,new M,new M],$=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M;A(this,e),this.origin=t,this.direction=a}return P(e,[{key:'set',value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:'copy',value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'at',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M;return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:'lookAt',value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:'recast',value:function(e){return this.origin.copy(this.at(e,J[0])),this}},{key:'closestPointToPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M,a=t.subVectors(e,this.origin).dot(this.direction);return 0<=a?t.copy(this.direction).multiplyScalar(a).add(this.origin):t.copy(this.origin)}},{key:'distanceSquaredToPoint',value:function(e){var t=J[0].subVectors(e,this.origin).dot(this.direction);return 0>t?this.origin.distanceToSquared(e):J[0].copy(this.direction).multiplyScalar(t).add(this.origin).distanceToSquared(e)}},{key:'distanceToPoint',value:function(e){return h(this.distanceSquaredToPoint(e))}},{key:'distanceToPlane',value:function(e){var a=e.normal.dot(this.direction),n=0===a?0===e.distanceToPoint(this.origin)?0:-1:-(this.origin.dot(e.normal)+e.constant)/a;return 0<=n?n:null}},{key:'distanceSquaredToSegment',value:function(e,t,a,n){var o=J[0].copy(e).add(t).multiplyScalar(.5),l=J[1].copy(t).sub(e).normalize(),r=J[2].copy(this.origin).sub(o),y=.5*e.distanceTo(t),i=-this.direction.dot(l),s=r.dot(this.direction),m=-r.dot(l),d=r.lengthSq(),c=u(1-i*i),v=void 0,x=void 0,p=void 0,z=void 0,h=void 0;return 0<c?(v=i*m-s,x=i*s-m,p=y*c,0<=v?x>=-p?x<=p?(z=1/c,v*=z,x*=z,h=v*(v+i*x+2*s)+x*(i*v+x+2*m)+d):(x=y,v=g(0,-(i*x+s)),h=-v*v+x*(x+2*m)+d):(x=-y,v=g(0,-(i*x+s)),h=-v*v+x*(x+2*m)+d):x<=-p?(v=g(0,-(-i*y+s)),x=0<v?-y:k(g(-y,-m),y),h=-v*v+x*(x+2*m)+d):x<=p?(v=0,x=k(g(-y,-m),y),h=x*(x+2*m)+d):(v=g(0,-(i*y+s)),x=0<v?y:k(g(-y,-m),y),h=-v*v+x*(x+2*m)+d)):(x=0<i?-y:y,v=g(0,-(i*x+s)),h=-v*v+x*(x+2*m)+d),void 0!==a&&a.copy(this.direction).multiplyScalar(v).add(this.origin),void 0!==n&&n.copy(l).multiplyScalar(x).add(o),h}},{key:'intersectSphere',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M,a=J[0].subVectors(e.center,this.origin),n=a.dot(this.direction),o=a.dot(a)-n*n,l=e.radius*e.radius,r=null,y=void 0,i=void 0,s=void 0;return o<=l&&(y=h(l-o),i=n-y,s=n+y,(0<=i||0<=s)&&(r=0>i?this.at(s,t):this.at(i,t))),r}},{key:'intersectsSphere',value:function(e){return this.distanceToPoint(e.center)<=e.radius}},{key:'intersectPlane',value:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M,n=this.distanceToPlane(e);return null===n?null:this.at(n,a)}},{key:'intersectsPlane',value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t}},{key:'intersectBox',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new M,a=this.origin,n=this.direction,o=e.min,l=e.max,r=1/n.x,y=1/n.y,i=1/n.z,s=null,u=void 0,c=void 0,m=void 0,d=void 0,v=void 0,x=void 0;return 0<=r?(u=(o.x-a.x)*r,c=(l.x-a.x)*r):(u=(l.x-a.x)*r,c=(o.x-a.x)*r),0<=y?(m=(o.y-a.y)*y,d=(l.y-a.y)*y):(m=(l.y-a.y)*y,d=(o.y-a.y)*y),u<=d&&m<=c&&((m>u||u!=u)&&(u=m),(d<c||c!=c)&&(c=d),0<=i?(v=(o.z-a.z)*i,x=(l.z-a.z)*i):(v=(l.z-a.z)*i,x=(o.z-a.z)*i),u<=x&&v<=c&&((v>u||u!=u)&&(u=v),(x<c||c!=c)&&(c=x),0<=c&&(s=this.at(0<=u?u:c,t)))),s}},{key:'intersectsBox',value:function(e){return null!==this.intersectBox(e,J[0])}},{key:'intersectTriangle',value:function(e,t,a,n,o){var l=this.direction,r=J[0],y=J[1],i=J[2],s=J[3],u=null,c=void 0,m=void 0,d=void 0,v=void 0,x=void 0;return y.subVectors(t,e),i.subVectors(a,e),s.crossVectors(y,i),c=l.dot(s),0===c||n&&0<c||(0<c?m=1:(m=-1,c=-c),r.subVectors(this.origin,e),d=m*l.dot(i.crossVectors(r,i)),0<=d&&(v=m*l.dot(y.cross(r)),0<=v&&d+v<=c&&(x=-m*r.dot(s),0<=x&&(u=this.at(x/c,o))))),u}},{key:'applyMatrix4',value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:'equals',value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),e}(),ee=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;A(this,e),this.radius=t,this.phi=a,this.theta=n}return P(e,[{key:'set',value:function(e,t,a){return this.radius=e,this.phi=t,this.theta=a,this}},{key:'copy',value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'setFromVector3',value:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=o(e.x,e.z),this.phi=d(k(g(e.y/this.radius,-1),1))),this.makeSafe()}},{key:'makeSafe',value:function(){return this.phi=g(1e-6,k(n-1e-6,this.phi)),this}}]),e}(),te=function(){function e(){A(this,e),this.elements=new Float32Array([1,0,0,1,0,1])}return P(e,[{key:'set',value:function(t,a,n,o,l,r){var y=this.elements;return y[0]=t,y[1]=a,y[3]=o,y[2]=n,y[4]=l,y[5]=r,this}},{key:'identity',value:function(){return this.set(1,0,0,1,0,1),this}},{key:'copy',value:function(e){var t=e.elements;return this.set(t[0],t[1],t[2],t[3],t[4],t[5]),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'toMatrix3',value:function(e){var t=e.elements;e.set(t[0],t[1],t[2],t[1],t[3],t[4],t[2],t[4],t[5])}},{key:'add',value:function(e){var t=this.elements,a=e.elements;return t[0]+=a[0],t[1]+=a[1],t[3]+=a[3],t[2]+=a[2],t[4]+=a[4],t[5]+=a[5],this}},{key:'norm',value:function(){var t=this.elements,e=t[1]*t[1],a=t[2]*t[2],n=t[4]*t[4];return h(t[0]*t[0]+e+a+e+t[3]*t[3]+n+a+n+t[5]*t[5])}},{key:'off',value:function(){var t=this.elements;return h(2*(t[1]*t[1]+t[2]*t[2]+t[4]*t[4]))}},{key:'applyToVector3',value:function(t){var a=t.x,n=t.y,o=t.z,l=this.elements;return t.x=l[0]*a+l[1]*n+l[2]*o,t.y=l[1]*a+l[3]*n+l[4]*o,t.z=l[2]*a+l[4]*n+l[5]*o,t}},{key:'equals',value:function(e){var t=this.elements,a=e.elements,n=!0,o=void 0;for(o=0;n&&6>o;++o)t[o]!==a[o]&&(n=!1);return n}}],[{key:'calculateIndex',value:function(e,t){return 3-(3-e)*(2-e)/2+t}}]),e}(),ae=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;A(this,e),this.x=t,this.y=a,this.z=n,this.w=o}return P(e,[{key:'set',value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:'copy',value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:'setAxisAngleFromQuaternion',value:function(e){this.w=2*d(e.w);var t=h(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:'setAxisAngleFromRotationMatrix',value:function(e){var t=.01,a=.1,o=e.elements,l=o[0],r=o[4],i=o[8],c=o[1],m=o[5],v=o[9],k=o[2],p=o[6],g=o[10],S=void 0,A=void 0,P=void 0,w=void 0,E=void 0,T=void 0,M=void 0,f=void 0,b=void 0,O=void 0,F=void 0;return u(r-c)<t&&u(i-k)<t&&u(v-p)<t?u(r+c)<a&&u(i+k)<a&&u(v+p)<a&&u(l+m+g-3)<a?this.set(1,0,0,0):(S=n,E=(l+1)/2,T=(m+1)/2,M=(g+1)/2,f=(r+c)/4,b=(i+k)/4,O=(v+p)/4,E>T&&E>M?E<t?(A=0,P=.707106781,w=.707106781):(A=h(E),P=f/A,w=b/A):T>M?T<t?(A=.707106781,P=0,w=.707106781):(P=h(T),A=f/P,w=O/P):M<t?(A=.707106781,P=.707106781,w=0):(w=h(M),A=b/w,P=O/w),this.set(A,P,w,S)):(F=h((p-v)*(p-v)+(i-k)*(i-k)+(c-r)*(c-r)),.001>u(F)&&(F=1),this.x=(p-v)/F,this.y=(i-k)/F,this.z=(c-r)/F,this.w=d((l+m+g-1)/2)),this}},{key:'add',value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:'addScalar',value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:'addVectors',value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:'addScaledVector',value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:'sub',value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:'subScalar',value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:'subVectors',value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:'multiply',value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:'multiplyScalar',value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:'multiplyVectors',value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this.w=e.w*t.w,this}},{key:'divide',value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:'divideScalar',value:function(e){return this.x/=e,this.y/=e,this.z/=e,this.w/=e,this}},{key:'applyMatrix4',value:function(t){var a=this.x,n=this.y,o=this.z,l=this.w,r=t.elements;return this.x=r[0]*a+r[4]*n+r[8]*o+r[12]*l,this.y=r[1]*a+r[5]*n+r[9]*o+r[13]*l,this.z=r[2]*a+r[6]*n+r[10]*o+r[14]*l,this.w=r[3]*a+r[7]*n+r[11]*o+r[15]*l,this}},{key:'negate',value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:'dot',value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:'manhattanLength',value:function(){return u(this.x)+u(this.y)+u(this.z)+u(this.w)}},{key:'lengthSquared',value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:'length',value:function(){return h(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:'manhattanDistanceTo',value:function(e){return u(this.x-e.x)+u(this.y-e.y)+u(this.z-e.z)+u(this.w-e.w)}},{key:'distanceToSquared',value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z,o=this.w-e.w;return t*t+a*a+n*n+o*o}},{key:'distanceTo',value:function(e){return h(this.distanceToSquared(e))}},{key:'normalize',value:function(){return this.divideScalar(this.length())}},{key:'setLength',value:function(e){return this.normalize().multiplyScalar(e)}},{key:'min',value:function(e){return this.x=k(this.x,e.x),this.y=k(this.y,e.y),this.z=k(this.z,e.z),this.w=k(this.w,e.w),this}},{key:'max',value:function(e){return this.x=g(this.x,e.x),this.y=g(this.y,e.y),this.z=g(this.z,e.z),this.w=g(this.w,e.w),this}},{key:'clamp',value:function(e,t){return this.x=g(e.x,k(t.x,this.x)),this.y=g(e.y,k(t.y,this.y)),this.z=g(e.z,k(t.z,this.z)),this.w=g(e.w,k(t.w,this.w)),this}},{key:'floor',value:function(){return this.x=i(this.x),this.y=i(this.y),this.z=i(this.z),this.w=i(this.w),this}},{key:'ceil',value:function(){return this.x=r(this.x),this.y=r(this.y),this.z=r(this.z),this.w=r(this.w),this}},{key:'round',value:function(){return this.x=l(this.x),this.y=l(this.y),this.z=l(this.z),this.w=l(this.w),this}},{key:'lerp',value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:'lerpVectors',value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:'equals',value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}]),e}(),ne={MAIN:0,AUXILIARY:1,SECONDARY:2},oe=new M,le=new c,re=function(){function e(t,a,n,o){A(this,e),this.position=t,this.quaternion=a,this.target=n,this.settings=o,this.spherical=new ee}return P(e,[{key:'setPosition',value:function(e){return this.position=e,this}},{key:'setQuaternion',value:function(e){return this.quaternion=e,this}},{key:'setTarget',value:function(e){return this.target=e,this}},{key:'updateQuaternion',value:function(){var e=this.settings,t=e.rotation;return e.general.orbit?le.lookAt(oe.subVectors(this.position,this.target),t.pivotOffset,t.up):le.lookAt(oe.set(0,0,0),this.target.setFromSpherical(this.spherical),t.up),this.quaternion.setFromRotationMatrix(le),this}},{key:'adjustSpherical',value:function(e,t){var a=this.settings,o=a.general.orbit,l=a.rotation,r=this.spherical;return r.theta=l.invertX?r.theta+e:r.theta-e,r.phi=(o||l.invertY)&&!(o&&l.invertY)?r.phi-t:r.phi+t,r.theta=k(g(r.theta,l.minAzimuthalAngle),l.maxAzimuthalAngle),r.phi=k(g(r.phi,l.minPolarAngle),l.maxPolarAngle),r.theta%=2*n,r.makeSafe(),o&&this.position.setFromSpherical(r).add(this.target),this}},{key:'zoom',value:function(e){var t=this.settings,a=t.general,n=t.sensitivity,o=t.zoom,l=this.spherical,r=void 0,y=void 0,i=void 0;return a.orbit&&o.enabled&&(r=e*n.zoom,o.invert&&(r=-r),y=g(o.minDistance,1e-6),i=k(o.maxDistance,1/0),l.radius=k(g(l.radius+r,y),i),this.position.setFromSpherical(l).add(this.target)),this}},{key:'update',value:function(){}},{key:'lookAt',value:function(e){var t=this.spherical,a=this.position,n=this.target;return n.copy(e),this.settings.general.orbit?oe.subVectors(a,n):oe.subVectors(n,a).normalize(),t.setFromVector3(oe),t.radius=g(t.radius,1e-6),this.updateQuaternion(),this}},{key:'getViewDirection',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M;return e.setFromSpherical(this.spherical).normalize(),this.settings.general.orbit&&e.negate(),e}}]),e}(),ye=function(){function e(){A(this,e),this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1}return P(e,[{key:'reset',value:function(){return this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1,this}}]),e}(),ie=new M(1,0,0),x=new M(0,1,0),y=new M(0,0,1),z=new M,se=function(){function e(t,a,n,o){A(this,e),this.position=t,this.quaternion=a,this.target=n,this.settings=o,this.movementState=new ye}return P(e,[{key:'setPosition',value:function(e){return this.position=e,this}},{key:'setQuaternion',value:function(e){return this.quaternion=e,this}},{key:'setTarget',value:function(e){return this.target=e,this}},{key:'translateOnAxis',value:function(e,t){z.copy(e).applyQuaternion(this.quaternion).multiplyScalar(t),this.position.add(z),this.settings.general.orbit&&this.target.add(z)}},{key:'translate',value:function(e){var t=this.settings.sensitivity,a=this.movementState,n=e*t.translation;a.backward?this.translateOnAxis(y,n):a.forward&&this.translateOnAxis(y,-n),a.right?this.translateOnAxis(ie,n):a.left&&this.translateOnAxis(ie,-n),a.up?this.translateOnAxis(x,n):a.down&&this.translateOnAxis(x,-n)}},{key:'update',value:function(e){this.settings.translation.enabled&&this.translate(e)}},{key:'moveTo',value:function(e){return this.settings.general.orbit?this.target.copy(e):this.position.copy(e),this}}]),e}(),ue=new Proxy({BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,META_LEFT:91,META_RIGHT:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222},{get:function(e,t){return t in e?e[t]:1===t.length?t.toUpperCase().charCodeAt(0):void 0}}),ce=function(){function e(){A(this,e),this.orbit=!0}return P(e,[{key:'copy',value:function(e){return this.orbit=e.orbit,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}}]),e}(),me=function(){function e(){A(this,e),this.defaultActions=new Map,this.actions=new Map}return P(e,[{key:'reset',value:function(){return this.actions=new Map(this.defaultActions),this}},{key:'setDefault',value:function(e){return this.defaultActions=e,this.reset()}},{key:'copy',value:function(e){return this.defaultActions=new Map(e.defaultActions),this.actions=new Map(e.actions),this}},{key:'clearDefault',value:function(){return this.defaultActions.clear(),this}},{key:'clear',value:function(){return this.actions.clear(),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'has',value:function(e){return this.actions.has(e)}},{key:'get',value:function(e){return this.actions.get(e)}},{key:'set',value:function(e,t){return this.actions.set(e,t),this}},{key:'delete',value:function(e){return this.actions.delete(e)}},{key:'toJSON',value:function(){return{defaultActions:[].concat(T(this.defaultActions)),actions:[].concat(T(this.actions))}}}]),e}(),de=function(){function e(){A(this,e),this.hold=!1,this.lock=!0}return P(e,[{key:'copy',value:function(e){return this.hold=e.hold,this.lock=e.lock,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}}]),e}(),ve=function(){function e(){A(this,e),this.up=new M,this.up.copy(x),this.pivotOffset=new M,this.minAzimuthalAngle=-Infinity,this.maxAzimuthalAngle=1/0,this.minPolarAngle=0,this.maxPolarAngle=n,this.invertX=!1,this.invertY=!1}return P(e,[{key:'copy',value:function(e){return this.up.copy(e.up),this.pivotOffset.copy(e.pivotOffset),this.minAzimuthalAngle=null===e.minAzimuthalAngle?-Infinity:e.minAzimuthalAngle,this.maxAzimuthalAngle=null===e.maxAzimuthalAngle?1/0:e.maxAzimuthalAngle,this.minPolarAngle=e.minPolarAngle,this.maxPolarAngle=e.maxPolarAngle,this.invertX=e.invertX,this.invertY=e.invertY,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}}]),e}(),xe=function(){function e(){A(this,e),this.rotation=.0025,this.translation=1,this.zoom=.1}return P(e,[{key:'copy',value:function(e){return this.rotation=e.rotation,this.translation=e.translation,this.zoom=e.zoom,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}}]),e}(),ke=function(){function e(){A(this,e),this.enabled=!0}return P(e,[{key:'copy',value:function(e){return this.enabled=e.enabled,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}}]),e}(),pe=function(){function e(){A(this,e),this.enabled=!0,this.invert=!1,this.minDistance=1e-6,this.maxDistance=1/0}return P(e,[{key:'copy',value:function(e){return this.enabled=e.enabled,this.invert=e.invert,this.minDistance=e.minDistance,this.maxDistance=e.maxDistance,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}}]),e}(),ge=function(){function e(){A(this,e),this.general=new ce,this.keyBindings=new me,this.keyBindings.setDefault(new Map([[ue.W,s.MOVE_FORWARD],[ue.UP,s.MOVE_FORWARD],[ue.A,s.MOVE_LEFT],[ue.LEFT,s.MOVE_LEFT],[ue.S,s.MOVE_BACKWARD],[ue.DOWN,s.MOVE_BACKWARD],[ue.D,s.MOVE_RIGHT],[ue.RIGHT,s.MOVE_RIGHT],[ue.X,s.MOVE_DOWN],[ue.SPACE,s.MOVE_UP],[ue.PAGE_DOWN,s.ZOOM_OUT],[ue.PAGE_UP,s.ZOOM_IN]])),this.pointer=new de,this.rotation=new ve,this.sensitivity=new xe,this.translation=new ke,this.zoom=new pe}return P(e,[{key:'copy',value:function(e){return this.general.copy(e.general),this.keyBindings.copy(e.keyBindings),this.pointer.copy(e.pointer),this.rotation.copy(e.rotation),this.sensitivity.copy(e.sensitivity),this.translation.copy(e.translation),this.zoom.copy(e.zoom),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'toDataURL',value:function(){return URL.createObjectURL(new Blob([JSON.stringify(this)],{type:'text/json'}))}}]),e}(),ze=function(){function e(){A(this,e)}return P(e,[{key:'execute',value:function(){throw new Error('Strategy#execute method not implemented!')}}]),e}(),he=function(e){function t(e,a){A(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.movementState=e,n.direction=a,n}return w(t,e),P(t,[{key:'execute',value:function(e){var t=this.movementState;switch(this.direction){case Se.FORWARD:t.forward=e;break;case Se.LEFT:t.left=e;break;case Se.BACKWARD:t.backward=e;break;case Se.RIGHT:t.right=e;break;case Se.DOWN:t.down=e;break;case Se.UP:t.up=e;}}}]),t}(ze),Se={FORWARD:0,LEFT:1,BACKWARD:2,RIGHT:3,DOWN:4,UP:5},Ae=function(e){function t(e,a){A(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.rotationManager=e,n.zoomIn=a,n}return w(t,e),P(t,[{key:'execute',value:function(e){e&&this.rotationManager.zoom(this.zoomIn?-1:1)}}]),t}(ze),Pe=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document.body;A(this,e),this.dom=n,this.position=t,this.quaternion=a,this.target=new M,this.settings=new ge,this.rotationManager=new re(t,a,this.target,this.settings),this.translationManager=new se(t,a,this.target,this.settings),this.strategies=function(e,t){var a=t.movementState;return new Map([[s.MOVE_FORWARD,new he(a,Se.FORWARD)],[s.MOVE_LEFT,new he(a,Se.LEFT)],[s.MOVE_BACKWARD,new he(a,Se.BACKWARD)],[s.MOVE_RIGHT,new he(a,Se.RIGHT)],[s.MOVE_DOWN,new he(a,Se.DOWN)],[s.MOVE_UP,new he(a,Se.UP)],[s.ZOOM_OUT,new Ae(e,!1)],[s.ZOOM_IN,new Ae(e,!0)]])}(this.rotationManager,this.translationManager),this.lastScreenPosition=new L,this.dragging=!1,this.enabled=!1,null!==t&&null!==a&&(this.lookAt(this.target),null!==n&&this.setEnabled())}return P(e,[{key:'getDom',value:function(){return this.dom}},{key:'getPosition',value:function(){return this.position}},{key:'getQuaternion',value:function(){return this.quaternion}},{key:'getTarget',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M;return e.copy(this.target),this.settings.general.orbit||e.add(this.position),e}},{key:'getViewDirection',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new M;return this.rotationManager.getViewDirection(e)}},{key:'setDom',value:function(e){var t=this.enabled;return null!==e&&(t&&this.setEnabled(!1),this.dom=e,this.setEnabled(t)),this}},{key:'setPosition',value:function(e){return this.position=e,this.rotationManager.setPosition(e),this.translationManager.setPosition(e),this.lookAt(this.target)}},{key:'setQuaternion',value:function(e){return this.quaternion=e,this.rotationManager.setQuaternion(e),this.translationManager.setQuaternion(e),this.lookAt(this.target)}},{key:'setTarget',value:function(e){return this.target=e,this.rotationManager.setTarget(e),this.translationManager.setTarget(e),this.lookAt(this.target)}},{key:'setOrbitEnabled',value:function(e){var t=this.settings.general;return t.orbit!==e&&(this.getTarget(this.target),t.orbit=e,this.lookAt(this.target)),this}},{key:'copy',value:function(e){return this.dom=e.getDom(),this.position=e.getPosition(),this.quaternion=e.getQuaternion(),this.target=e.getTarget(),this.settings.copy(e.settings),this.rotationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.translationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.lookAt(this.target)}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'handlePointerMoveEvent',value:function(e){var t=this.settings,a=t.pointer,n=t.sensitivity,o=this.rotationManager,l=this.lastScreenPosition,r=void 0,y=void 0;document.pointerLockElement===this.dom?(!a.hold||this.dragging)&&o.adjustSpherical(e.movementX*n.rotation,e.movementY*n.rotation).updateQuaternion():(r=e.screenX-l.x,y=e.screenY-l.y,l.set(e.screenX,e.screenY),o.adjustSpherical(r*n.rotation,y*n.rotation).updateQuaternion())}},{key:'handleTouchMoveEvent',value:function(e){var t=this.settings.sensitivity,a=this.rotationManager,n=this.lastScreenPosition,o=e.touches[0],l=o.screenX-n.x,r=o.screenY-n.y;n.set(o.screenX,o.screenY),e.preventDefault(),a.adjustSpherical(l*t.rotation,r*t.rotation).updateQuaternion()}},{key:'handleMainPointerButton',value:function(e,t){this.dragging=t,this.settings.pointer.lock?this.setPointerLocked():t?(this.lastScreenPosition.set(e.screenX,e.screenY),this.dom.addEventListener('mousemove',this)):this.dom.removeEventListener('mousemove',this)}},{key:'handleAuxiliaryPointerButton',value:function(){}},{key:'handleSecondaryPointerButton',value:function(){}},{key:'handlePointerButtonEvent',value:function(e,t){switch(e.preventDefault(),e.button){case ne.MAIN:this.handleMainPointerButton(e,t);break;case ne.AUXILIARY:this.handleAuxiliaryPointerButton(e,t);break;case ne.SECONDARY:this.handleSecondaryPointerButton(e,t);}}},{key:'handleTouchEvent',value:function(e,t){var a=e.touches[0];e.preventDefault(),t?(this.lastScreenPosition.set(a.screenX,a.screenY),this.dom.addEventListener('touchmove',this)):this.dom.removeEventListener('touchmove',this)}},{key:'handleKeyboardEvent',value:function(e,t){var a=this.settings.keyBindings;a.has(e.keyCode)&&(e.preventDefault(),this.strategies.get(a.get(e.keyCode)).execute(t))}},{key:'handleWheelEvent',value:function(e){this.rotationManager.zoom(Math.sign(e.deltaY))}},{key:'handlePointerLockEvent',value:function(){document.pointerLockElement===this.dom?this.dom.addEventListener('mousemove',this):this.dom.removeEventListener('mousemove',this)}},{key:'handleEvent',value:function(e){switch(e.type){case'mousemove':this.handlePointerMoveEvent(e);break;case'touchmove':this.handleTouchMoveEvent(e);break;case'mousedown':this.handlePointerButtonEvent(e,!0);break;case'mouseup':this.handlePointerButtonEvent(e,!1);break;case'touchstart':this.handleTouchEvent(e,!0);break;case'touchend':this.handleTouchEvent(e,!1);break;case'keydown':this.handleKeyboardEvent(e,!0);break;case'keyup':this.handleKeyboardEvent(e,!1);break;case'wheel':this.handleWheelEvent(e);break;case'pointerlockchange':this.handlePointerLockEvent();}}},{key:'update',value:function(e){this.rotationManager.update(e),this.translationManager.update(e)}},{key:'moveTo',value:function(e){return this.rotationManager.moveTo(e),this}},{key:'lookAt',value:function(e){return this.rotationManager.lookAt(e),this}},{key:'setPointerLocked',value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];e?document.pointerLockElement!==this.dom&&void 0!==this.dom.requestPointerLock&&this.dom.requestPointerLock():void 0!==document.exitPointerLock&&document.exitPointerLock()}},{key:'setEnabled',value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.dom;return this.translationManager.movementState.reset(),e&&!this.enabled?(document.addEventListener('pointerlockchange',this),document.body.addEventListener('keyup',this),document.body.addEventListener('keydown',this),t.addEventListener('mousedown',this),t.addEventListener('mouseup',this),t.addEventListener('touchstart',this),t.addEventListener('touchend',this),t.addEventListener('wheel',this)):!e&&this.enabled&&(document.removeEventListener('pointerlockchange',this),document.body.removeEventListener('keyup',this),document.body.removeEventListener('keydown',this),t.removeEventListener('mousedown',this),t.removeEventListener('mouseup',this),t.removeEventListener('touchstart',this),t.removeEventListener('touchend',this),t.removeEventListener('wheel',this),t.removeEventListener('mousemove',this),t.removeEventListener('touchmove',this)),this.setPointerLocked(!1),this.enabled=e,this}},{key:'dispose',value:function(){this.setEnabled(!1)}}]),e}();e.Action=s,e.DeltaControls=Pe,e.KeyCode=ue,e.PointerButton=ne,e.MovementState=ye,e.RotationManager=re,e.TranslationManager=se,e.GeneralSettings=ce,e.KeyBindings=me,e.PointerSettings=de,e.RotationSettings=ve,e.SensitivitySettings=xe,e.TranslationSettings=ke,e.Settings=ge,e.ZoomSettings=pe,e.Direction=Se,e.MovementStrategy=he,e.Strategy=ze,e.ZoomStrategy=Ae,Object.defineProperty(e,'__esModule',{value:!0})});
